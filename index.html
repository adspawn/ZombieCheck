<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2040年人口減少シミュレーション</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #222;
            color: white;
        }

        #log {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #444;
            padding: 10px;
            background-color: #333;
        }

        #countdown {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }

        #progress-container {
            width: 50%;
            background-color: #555;
            height: 20px;
            margin: 10px auto;
            border-radius: 10px;
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            background-color: red;
            width: 100%;
            transition: width linear;
        }
    </style>
</head>

<body>
    <h1>日本の人口減少シミュレーション</h1>
    <p>現在の時刻: <span id="currentTime"></span></p>
    <p>現在の人口: <span id="population"></span> 人</p>
    <p>次の死亡まで: <span id="countdown">38.58</span> 秒</p>
    <div id="progress-container">
        <div id="progress-bar"></div>
    </div>
    <h2>死亡ログ</h2>
    <div id="log"></div>

    <script>
        const initialPopulation = 124500000;
        const futurePopulation = 110920000;
        const yearsRemaining = 2040 - new Date().getFullYear();
        let currentPopulation = initialPopulation;
        const totalSeconds = yearsRemaining * 365 * 24 * 60 * 60;
        const populationDecrease = initialPopulation - futurePopulation;
        const secondsPerDeath = totalSeconds / populationDecrease;
        let countdown = secondsPerDeath;

        function updateClock() {
            document.getElementById("currentTime").textContent = new Date().toLocaleTimeString();
        }

        function updatePopulation() {
            currentPopulation -= 1;
            document.getElementById("population").textContent = Math.floor(currentPopulation).toLocaleString();
        }

        function countdownTimer() {
            countdown -= 0.1;
            if (countdown <= 0) {
                logDeath();
                countdown = secondsPerDeath;
            }
            document.getElementById("countdown").textContent = countdown.toFixed(2);
            document.getElementById("progress-bar").style.width = (countdown / secondsPerDeath) * 100 + "%";
        }

        function logDeath() {
            const surnames = ["佐藤", "鈴木", "高橋", "田中", "伊藤", "山本", "中村", "小林", "加藤", "吉田"];
            const givenNames = ["太郎", "花子", "一郎", "二郎", "三郎", "美咲", "健一", "真由美", "翔", "美月"];
            const surname = surnames[Math.floor(Math.random() * surnames.length)];
            const givenName = givenNames[Math.floor(Math.random() * givenNames.length)];
            const fullName = `${surname} ${givenName}`;
            const logEntry = `${new Date().toLocaleTimeString()} - ${fullName} が死亡しました。`;

            const logElement = document.createElement("p");
            logElement.textContent = logEntry;
            document.getElementById("log").prepend(logElement);
        }

        setInterval(updateClock, 1000);
        setInterval(updatePopulation, secondsPerDeath * 1000);
        setInterval(countdownTimer, 100);
    </script>
</body>

</html>